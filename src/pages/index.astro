---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';
import BlogPostPreview from '../components/BlogPostPreview.astro';

const allPosts = await getCollection('blog');
const recentPosts = allPosts
	.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
	.slice(0, 3);
---

<Layout title="TimoCodes - Built By Coders, For Coders">
	<div class="flex flex-col lg:flex-row min-h-screen">
		<!-- Left side - Main content -->
		<div class="w-full lg:w-2/3 p-4 lg:p-8 bg-gray-900">
			<div class="relative mb-8">
				<img
					src="/images/cyberpunk-bg2.jpg"
					alt="Cyberpunk Background"
					class="absolute inset-0 w-full h-full object-cover opacity-30"
				/>
				<div class="relative z-10 py-12 px-4">
					<h1
						class="text-4xl lg:text-5xl font-bold mb-4 text-green-400 glitch-text"
					>
						Built By Coders. <span class="text-purple-500"
							>For Coders</span
						>
					</h1>
					<p class="text-lg lg:text-xl text-green-300">
						Here you'll find awesome curated resources and articles
						about getting into tech as a learning developer or a
						career switcher
					</p>
				</div>
			</div>

			<h2 class="text-2xl lg:text-3xl font-bold mb-6 text-green-300">
				Latest Insights
			</h2>
			<div class="space-y-6">
				{recentPosts.map((post) => <BlogPostPreview post={post} />)}
			</div>

			<a
				href="/blog"
				class="inline-block mt-6 text-purple-400 hover:text-purple-300 transition-colors"
			>
				View all posts â†’
			</a>

			<div class="mt-12">
				<h2 class="text-2xl lg:text-3xl font-bold mb-4 text-green-300">
					Developer Resources
				</h2>
				<p class="mb-6 text-gray-300">
					Explore my curated collection of awesome repos, tools,
					resources, and roadmaps for developers.
				</p>
				<a
					href="/resources/"
					class="glow-button inline-block px-6 py-2 bg-purple-600 text-white rounded-full hover:bg-purple-700 transition-all"
				>
					Explore Resources
				</a>
			</div>
		</div>

		<!-- Right side - Signup form and Let's Connect -->
		<div class="w-full lg:w-1/3 bg-gray-800 p-4 lg:p-8 flex flex-col">
			<div class="mb-8 lg:mb-12">
				<h2 class="text-2xl lg:text-3xl font-bold mb-6 text-green-300">
					Subscribe to 404 Found Newsletter for more tech tips and
					resources
				</h2>
				<iframe
					src="https://embeds.beehiiv.com/baafacfb-8c63-47ac-ab45-38e06d923e4a"
					data-test-id="beehiiv-embed"
					width="100%"
					height="320"
					frameborder="0"
					scrolling="no"
					style="border-radius: 4px; border: 2px solid #4a5568; margin: 0; background-color: transparent;"
				>
				</iframe>
			</div>

			<div>
				<h3 class="text-xl lg:text-2xl font-bold mb-4 text-green-300">
					Let's Connect
				</h3>
				<div class="flex items-center">
					<img
						src="/images/timo-profile.jpg"
						alt="Timo's Profile"
						class="w-16 h-16 rounded-full mr-4"
					/>
					<div>
						<p class="text-gray-300 mb-2">
							Follow me on X for the latest updates and coding
							insights.
						</p>
						<a
							href="https://www.x.com/TimoCodes"
							target="_blank"
							rel="noopener noreferrer"
							class="glow-button inline-block px-4 py-2 bg-purple-600 text-white rounded-full hover:bg-purple-700 transition-all text-sm"
						>
							Follow @TimoCodes
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
</Layout>
